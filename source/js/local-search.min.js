/*!
 * Hexo Theme Suka | local-search.js
 * Author: SukkaW
 * Link: https://github.com/SukkaW/hexo-theme-suka
 * License: GPL-3.0
 */
String.prototype.queryUrl=function(e){var t=this.replace(/^[^?=]*\?/gi,"").split("#")[0],i={};return t.replace(/(^|&)([^&=]+)=([^&]*)/g,function(e,t,r,n){try{r=decodeURIComponent(r)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}r in i?i[r]instanceof Array?i[r].push(n):i[r]=[i[r],n]:i[r]=/\[\]$/.test(r)?[n]:n}),e?i[e]:i};var res,searchQuery=location.search.queryUrl(),searchFunc=function(e){"use strict";fetch(e).then(function(e){return e.json()}).then(function(e){var t=document.getElementById("search-output"),r=document.getElementById("search-result-num"),n=document.getElementById("search-result-info");void 0!==searchQuery.s&&(!function(p){var v="",y=p.trim().toLowerCase().split(/[\s\-]+/),g=0;if(t.innerHTML="",p.trim().length<=0)return;e.forEach(function(e){if(void 0!==e.title&&void 0!==e.content){var r=!0,n=e.title.trim().toLowerCase(),t=new Date(e.date).toLocaleDateString();if(void 0!==e.tags)var i=e.tags;else i=[];var a=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),s=e.url,c=-1,o=-1,l=-1,u=-1;if(""!==n&&""!==a&&y.forEach(function(e,t){c=n.indexOf(e),o=i.indexOf(e),l=a.indexOf(e),c<0&&o<0&&l<0?r=!1:(l<0&&(l=0),0===t&&(u=l),g+=1)}),r){v+='<div class="tile"><div class="tile-content">',v+=t,v+='<a href="'+s+'"><p class="tile-title mb-2">'+e.title+"</p></a>",v+=i.map(function(e){return"<span>"+e+" | </span>"}).join("");var d=e.content.trim();if(0<=u){var f=u-10,h=u+10;f<0&&(f=0),0===f&&(h=10),h>d.length&&(h=d.length-10);var m=d.substr(f,h);y.forEach(function(e){var t=new RegExp(e,"gi");m=m.replace(t,"<strong><mark>"+p+"</mark></strong>")}),v+='<p class="tile-subtitle my-1 text-gray search-result-summary">'+m+"...</p>"}v+="</div></div>",v+='<div class="divider pt-1"></div>'}}}),(r.innerHTML=g)<=0?(n.style.display="none",t.innerHTML=window.searchNoResult):(n.style.display="block",t.innerHTML=v)}(searchQuery.s),document.getElementById("search-field").setAttribute("value",searchQuery.s))})};